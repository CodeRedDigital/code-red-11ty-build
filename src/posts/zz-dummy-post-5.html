---
title: 'Dummy Post 5'
sub_title: ''
date: '2019-05-24'
tags: ['CSS', 'Animation', 'SVG', 'Transform', 'Navigation']
description: 'I created a animated logo and navigation for mobile devices and here I explain how I went about doing this.'
ph_colour: 'amber'
layout: 'layouts/posts.html'
first_post: 'https://letorey.co.uk/blog/animating-a-mobile-menu'
featured: false
card:
    image: '/images/posts/default-post-image.jpg'
    imageAlt: 'An example of an open menu'
---

<section>
<p>While designing my new site, I am first focussing on mobile first strategy, I want to learn and showcase ideas.</p>
<p>So I have decided that I want to animate the menu on mobile to make best use of the screen. Here is a small video of what I'm trying to achieve.</p>
<video controls="" width="722">
    <source src="https://letorey.co.uk/__data/assets/video_file/0007/5686/mobile-menu-animation.mp4" type="video/mp4">
</video>
</section>
<section>
<h2>Logo starting point</h2>
<p><img src="https://letorey.co.uk/__data/assets/image/0003/5709/logo-starting-point.png" alt="Logo position when the menu is closed" width="719" height="587" /></p>
<h3>HTML</h3>
<pre>&lt;header&gt;
    &lt;svg&gt;&hellip;&lt;/svg&gt;
  &lt;/header&gt; 
  </pre>
<h3>CSS</h3>
<pre>header {
    position: relative;
    top: 0px; left 0;
    height: 45px;
    width: 100%;
    background-color: #D0021B;
    padding: 5px;
    <strong>margin</strong>: 0 0 0 <strong>27px</strong>;
  }
  
  svg {
  &nbsp; position: absolute;
    top: 1px; <strong>left: -30px;</strong>
    <strong>z-index: 10;</strong>
  } 
   
  header svg {
    <strong>transform: rotate(90deg);</strong>
  }  </pre>
<h3>Explanation</h3>
<p>I want the header to start half way through the circle in the logo hence the margin-left of 27px. As the header has this margin then the svg needs a left position of -30px. I want the Logo to be on top of the header so gave it a z-index of 10. I have also set the svg in the header to rotate 90&ordm; clockwise.</p>
</section>
<section>
<h2>Logo ending point</h2>
<p><img src="https://letorey.co.uk/__data/assets/image/0020/5708/logo-ending-point.png" alt="Logo position when the menu is open" width="720" height="111" /></p>
<h3>HTML</h3>
<pre>&lt;header <strong>class="open"</strong>&gt;
    &lt;svg&gt;&hellip;&lt;/svg&gt;
  &lt;/header&gt; 
  </pre>
<h3>CSS</h3>
<pre>header {
    position: relative;
    top: 0px; left 0;
    height: 45px;
    width: 100%;
    background-color: #D0021B;
    padding: 5px;
    margin: 0 0 0 27px;
  }
  
  svg {
  &nbsp; position: absolute;
    top: 1px; left: -30px;
    z-index: 10;
  } 
   
  header.open svg {
    <strong>transform-origin: 28px 28px;</strong>
    <strong>transform: rotate(0deg);</strong>
  } </pre>
<h3>Explanation</h3>
<p>When the menu is open, the header has a <code>class="open"</code> and the logo will be in a horizontal position. It needs to rotate 90&ordm; anit-clockwise hence <code>transform: rotate(0deg)</code> which is going from 90&ordm; to 0&ordm;. As I want the rotation to happen in the centre of the circle in the logo I need to move the place where it rotates around, aka the origin, <code>transform-origin: 28px 28px</code>. With out this the default is to rotate in the centre of the image/svg.</p>
</section>
<section>
<h2>Menu open state</h2>
<p><img src="https://letorey.co.uk/__data/assets/image/0013/5710/menu-open.png" alt="Menu in the open state" width="714" height="668" /></p>
<h3>HTML</h3>
<pre>&lt;header&gt;
    &lt;button <strong>class="hidden"</strong> name="menu"&gt;Menu☰&lt;/button&gt;
    &lt;nav id="menu"&gt;
      &lt;ul&gt;
        &lt;li&gt;Ethos&lt;/li&gt;
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Services&lt;/li&gt;
        &lt;li&gt;Work&lt;/li&gt;
        &lt;li&gt;Case Studies&lt;/li&gt;
        &lt;li&gt;Blog&lt;/li&gt;
        &lt;li&gt;Contact&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Close X&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/nav&gt;
  &lt;/header&gt; </pre>
<h3>CSS</h3>
<pre><strong>button.hidden</strong> {
    color: #D0021B;
  }
   
  nav {
    margin-top: -40px;
    margin-left: -32px;
  }
   
  nav ul {
    background-color: #D0021B;
    color: #FAF9F9;
    font-family: 'Courier New';
    Font-weight: 700;
    font-size: 2em;
    list-style: none;
    margin: 23px 0 0 -27px;
    padding: 35px 10px 10px 33px;
    border-radius: 0 0 23px 0;
  }
   
  nav ul a {
    color: #FAF9F9;
  }
   
  nav ul a:hover {
    background-color: #FAf9f9;
    color: #D0021B;
  }  </pre>
<h3>Explanation</h3>
<p>This is all pretty simple the margin top and left are to position the menu around the header. The button is hidden while the menu is open.</p>
</section>
<section>
<h2>Menu hidden state</h2>
<p><img src="https://letorey.co.uk/__data/assets/image/0014/5711/menu-closed.png" alt="Menu in the closed state" width="718" height="110" /></p>
<h3>HTML</h3>
<pre>&lt;header&gt;
    &lt;button name="menu"&gt;Menu☰&lt;/button&gt;
    &lt;nav <strong>class="hidden"</strong> id="menu"&gt;
      &lt;ul&gt;
        &lt;li&gt;Ethos&lt;/li&gt;
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Services&lt;/li&gt;
        &lt;li&gt;Work&lt;/li&gt;
        &lt;li&gt;Case Studies&lt;/li&gt;
        &lt;li&gt;Blog&lt;/li&gt;
        &lt;li&gt;Contact&lt;/li&gt;
        &lt;li&gt;&lt;a href="#"&gt;Close X&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/nav&gt;
  &lt;/header&gt; </pre><h3>CSS</h3><pre>button {
    background-color: #D0021B;
    color: #FAF9F9;
    font-family: 'Courier New';
    font-size: 2em;
    Font-weight: 700;
    text-decoration: underline;
    border: none;
    margin: 5px 0 0 30px;
    cursor: pointer;
  }
   
  nav.hidden {
    <strong>max-height: 0;</strong>
  } 
  </pre>
<h3>Explanation</h3>
<p>In this instance the button is displayed and the nav hidden, this is done by setting the <code>max-height: 0;</code>. I am displaying the word "Menu" as I don't think that the 3 horizontal lines (☰), aka hamburger menu, is good enough for accessibility purposes.</p>
</section>
<section>
<h2>Click/touch interaction and recognition</h2>
<h3>HTML</h3>
<pre>&lt;header&gt;
    &lt;button <strong>id="menuButton" onclick="menuToggle()"</strong> name="menu"&gt;Menu☰&lt;/button&gt;
    &lt;nav class="hidden" id="menu"&gt;
      &lt;ul&gt;
        &lt;li&gt;Ethos&lt;/li&gt;
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Services&lt;/li&gt;
        &lt;li&gt;Work&lt;/li&gt;
        &lt;li&gt;Case Studies&lt;/li&gt;
        &lt;li&gt;Blog&lt;/li&gt;
        &lt;li&gt;Contact&lt;/li&gt;
        &lt;li&gt;&lt;a href="#" <strong>onclick="menuToggle()"</strong>&gt;Close X&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/nav&gt;
  &lt;/header&gt; </pre>
<h3>JavaScript</h3>
<pre>const menuButton = document.querySelector("#menuButton");
  const nav = document.querySelector("#menu");
  const header = document.querySelector("header");
   
  function menuToggle() {
    menuButton.classList.toggle("hidden");
    nav.classList.toggle("hidden");
    header.classList.toggle("open");
  }  </pre>
<h3>Explanation</h3>
<p>In the HTML I have added an <code>id="menuButton"</code> to make it easy to target incaase there are other buttons on the page, and an <code>onclick</code> event listener to the bnutton and close link.</p>
<p>In the JavaScript I am setting up 3 variables:</p>
<ul>
    <li>menuButton</li>
    <li>nav</li>
    <li>header</li>
</ul>
<p>I have then created a function thattargets the 3 varibales and toggles the classes on or off depending on their current state. For example if there is no <code>class="hidden"</code> then it adds it and if the is a <code>class="hidden"</code> then it removes it.</p>
</section>
<section>
<h2>Animate logo</h2>
<h3>CSS</h3>
<pre>header svg {
  &nbsp; transform-origin: 28px 28px;
    transform: rotate(0deg);
    <strong>transition: transform 2s ease;</strong>
  } </pre>
<h3>Explanation</h3>
<p>To the svg style I have added a <code>transition</code> property. This tells it that any transform should take <code>2s</code> (seconds) and <code>ease</code> (start slowly accelerate end slowly).</p>
</section>
<section>
<h2>Animate menu</h2>
<h3>CSS</h3>
<pre>nav {
    <strong>max-height: 500px;</strong>
    <strong>transition: max-height 2s ease;</strong>
    overflow: hidden;
    margin-top: -40px;
    margin-left: -32px;
  }
   
  nav.hidden {
    max-height: 0;
    <strong>transition: max-height 2s ease;</strong>
  }  </pre>
<h3>Explanation</h3>
<p>Here I have added a <code>max-height: 500px;</code> to the nav this is an arbitary value that is larger than the menu will be so that the is a value to transition upon. Then I have a transition: max-height 2s ease; which performs the transition on the <code>max-height</code> property for <code>2s</code> (seconds) and <code>ease</code>s.</p>
</section>
<section>
<h2>Add delays</h2>
<h3>CSS</h3>
<pre>header.open svg {
    transform-origin: 28px 28px;
    transform: rotate(-90deg);
    <strong>transition-delay: 0s;</strong>
  }
   
  header svg {
    transform-origin: 28px 28px;
    transform: rotate(0deg);
    transition: transform 2s ease;
    <strong>transition-delay: 2s;</strong>
  } 
  
  nav {
    max-height: 500px;
    transition: max-height 2s ease;
    <strong>transition-delay: 2s;</strong>
    overflow: hidden;
    margin-top: -40px;
    margin-left: -32px;
  }
   
  nav.hidden {
    max-height: 0;
    transition: max-height 2s ease;
    <strong>transition-delay: 0s;</strong>
  } </pre>
<h3>Explanation</h3>
<p>So here I want the following to happen:</p>
<ul>
    <li>On menu open:
        <ul>
            <li>Logo folds up</li>
            <li>Menu opens down</li>
        </ul>
    </li>
    <li>on menu close:
        <ul>
            <li>Menu closes up</li>
            <li>Logo folds down</li>
        </ul>
    </li>
</ul>
<p>The logo folding up should happen immediately, so no delay, <code>transition-delay: 0s;</code> when that has complete the menu opens down <code>transition-delay: 2s;</code> (this is 2 seconds as that is how long the first part takes).</p>
<p>The menu closing up should happen immediately, so no delay, <code>transition-delay: 0s;</code> when that has complete the logo folds down <code>transition-delay: 2s;</code>.</p>
</section>
<section>
<h2>Fallback for no JavaScript, prefers-reduced-motion or no transition support</h2>
<p>It is really important to deal with the following situations:</p>
<ul>
    <li>The user has set <code>perfers-reduced-motion</code>, there are a number of reasons this may be enabled, such as:
        <ul>
            <li>Users may suffer with a condition where too much motion can induce migraines</li>
            <li>User may have disabled animations due to performance</li>
        </ul>
    </li>
    <li>The browser they are using may not support animations</li>
    <li>The browser may have JavaScript disabled</li>
</ul>
<p>In these, and many other, situations we should provide a fallback</p>
<h3>HTML</h3>
<pre>&lt;html <strong>class="no-js"</strong>&gt;
    &lt;head&gt;
      &hellip;
      &lt;script&gt;
        document.documentElement.classList.remove("no-js");
      &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;&hellip;&lt;/body&gt;
  &lt;/html&gt;  </pre>
<h3>CSS</h3>
<pre><strong>@media (prefers-reduced-motion)</strong> {
    nav.hidden 
      max-height: 500px;
    }
    header svg {
      transform: rotate(-90deg);
    }
  }
   
  <strong>@supports not (transition)</strong> {
    nav.hidden {
      max-height: 500px;
    }
  }
   
  <strong>.no-js nav.hidden</strong> {
    max-height: 500px;
  }
   
  <strong>.no-js header svg</strong> {
    transform: rotate(-90deg);
  } </pre>
<h3>Explanation</h3>
<p>In the HTML there is a class="no-js" applied and removed automatically if JavaScript is enabled, if not I can target this class for <code>.no-js nav.hidden</code> &amp; <code>.no-js header svg</code>.</p>
<p>The media and supports queries can also be used to see if <code>prefers-reduced-motion</code> is enabled or is the browser does not support <code>transition</code>.</p>
</section>
<section>
<h2>Full working example</h2>
<p class="codepen" data-height="431" data-border-color="#D0021B" data-active-link-color="#FAF9F9" data-active-tab-color="#D0021B" data-tab-link-color="#D0021B" data-theme-id="dark" data-default-tab="html,result" data-user="code-red-uk" data-slug-hash="XWKvpVQ" style="height: 431px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="Code Red Logo Rotate with fallback"><span>See the Pen <a href="https://codepen.io/code-red-uk/pen/XWKvpVQ">Code Red Logo Rotate with fallback</a> by Dave Letorey (<a href="https://codepen.io/code-red-uk">@code-red-uk</a>) on <a href="https://codepen.io">CodePen</a>.</span></p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script> 
</section>